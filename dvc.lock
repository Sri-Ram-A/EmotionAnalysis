schema: '2.0'
stages:
  preprocess:
    cmd: python -m src.data.preprocess
    deps:
    - path: src/artifacts/data/Twitter/raw/train.csv
      hash: md5
      md5: 93b325080d2c8375dd28637a2c1d9de4
      size: 10325088
    - path: src/data/preprocess.py
      hash: md5
      md5: 7b9775420f7c41d18b9e23afaeb3f14a
      size: 2884
    - path: src/data/slangs.txt
      hash: md5
      md5: 083f59b49a2666a1afcca477b64126a4
      size: 10540
    params:
      params.yaml:
        dataset:
          raw_path: 
            /home/srirama/sr_proj/EmotionAnalysis/src/artifacts/data/Twitter/raw/train.csv
          preprocessed_path: 
            /home/srirama/sr_proj/EmotionAnalysis/src/artifacts/data/Twitter/preprocessed/train.csv
          name: Twitter
          nrows_preprocess: 100
          text_column_index: 3
          label_column_index: 2
    outs:
    - path: src/artifacts/data/Twitter/preprocessed/train.csv
      hash: md5
      md5: b0397c910bc6e5e2153d21f552edc34d
      size: 8848
  featurize:
    cmd: python -m src.data.main
    deps:
    - path: src/data/main.py
      hash: md5
      md5: e713244075706d14ccb4dd9289d2c5ab
      size: 540
    params:
      params.yaml:
        dataset:
          raw_path: 
            /home/srirama/sr_proj/EmotionAnalysis/src/artifacts/data/Twitter/raw/train.csv
          preprocessed_path: 
            /home/srirama/sr_proj/EmotionAnalysis/src/artifacts/data/Twitter/preprocessed/train.csv
          name: Twitter
          nrows_preprocess: 100
          text_column_index: 3
          label_column_index: 2
        featurize:
          method: padding
          padding:
            padding: post
            truncating: post
            maxlen: 75
    outs:
    - path: src/artifacts/data.h5
      hash: md5
      md5: 9933a1dc12bea1e79f32fea19d5ea525
      size: 32828
    - path: src/artifacts/tokenizer.json
      hash: md5
      md5: e390a5cd254dd4b71a99e6005699e2d9
      size: 29329
  train:
    cmd: python -m src.train.main
    deps:
    - path: src/artifacts/data.h5
      hash: md5
      md5: 9933a1dc12bea1e79f32fea19d5ea525
      size: 32828
    - path: src/artifacts/tokenizer.json
      hash: md5
      md5: e390a5cd254dd4b71a99e6005699e2d9
      size: 29329
    - path: src/train/main.py
      hash: md5
      md5: 05f3630186ecb725f7cf74e1aea6766c
      size: 3016
    params:
      params.yaml:
        mlflow:
          perform: true
          experiment_name: 1-GRU
          tracking_uri: http://localhost:5000
        model:
          architecture: gru
          embedding_dimension: 14
        train:
          perform: true
          nrows_train:
          epochs: 5
          batch_size: 400
          test_size: 0.4
    outs:
    - path: src/artifacts/recent
      hash: md5
      md5: 2e1bc0eea718a04eff8689b94a2ac837.dir
      size: 6001823
      nfiles: 12
  stage:
    cmd: python -m src.registry.stage
    deps:
    - path: src/registry/stage.py
      hash: md5
      md5: bdf5f53bef855e77105fd80202f92045
      size: 2710
    params:
      params.yaml:
        model:
          architecture: gru
          embedding_dimension: 14
        train:
          perform: true
          nrows_train:
          epochs: 5
          batch_size: 400
          test_size: 0.4
  promote:
    cmd: python -m src.registry.promote
    deps:
    - path: src/registry/promote.py
      hash: md5
      md5: 46a78c92e9ad97281262813f0ff06fe8
      size: 4152
    params:
      params.yaml:
        model:
          architecture: gru
          embedding_dimension: 14
        train:
          perform: true
          nrows_train:
          epochs: 5
          batch_size: 400
          test_size: 0.4
