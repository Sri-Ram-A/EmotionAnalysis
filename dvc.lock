schema: '2.0'
stages:
  preprocess:
    cmd: python src/data/preprocess.py
    deps:
    - path: data/Twitter/raw/train.csv
      hash: md5
      md5: 93b325080d2c8375dd28637a2c1d9de4
      size: 10325088
    - path: src/data/preprocess.py
      hash: md5
      md5: 1a52ba08f3dfb5097b3351701d4e28de
      size: 3236
    - path: src/data/slangs.txt
      hash: md5
      md5: 083f59b49a2666a1afcca477b64126a4
      size: 10540
    params:
      params.yaml:
        dataset:
          raw_path: data/Twitter/raw/train.csv
          preprocessed_path: src/artifacts/data/preprocessed/train.csv
          name: Twitter
          nrows_preprocess: None
          text_column_index: 3
          label_column_index: 2
    outs:
    - path: src/artifacts/data/preprocessed/train.csv
      hash: md5
      md5: f7608977437143f8d635ad1bbba912c8
      size: 5688976
  train:
    cmd: python src/train/user_input.py
    deps:
    - path: src/artifacts/data.h5
      hash: md5
      md5: 441956a6157512b773d8f5b34f7e20e6
      size: 23073060
    - path: src/artifacts/tokenizer.json
      hash: md5
      md5: 51cbb861a5a77c424d1a9bf97207aa57
      size: 2526060
    - path: src/train/user_input.py
      hash: md5
      md5: 93a8398438160520d0a4f0b2bcc9555c
      size: 3108
    params:
      params.yaml:
        mlflow:
          perform: 'true'
          experiment_name: 1-REG
          tracking_uri: http://localhost:5000
        model:
          architecture: rnn
          embedding_dimension: 40
        train:
          perform: 'true'
          nrows_train: None
          epochs: 1
          batch_size: 400
          test_size: 0.4
    outs:
    - path: src/artifacts/recent_model/gru
      hash: md5
      md5: d751713988987e9331980363e24189ce.dir
      size: 0
      nfiles: 0
    - path: src/artifacts/recent_model/lstm
      hash: md5
      md5: d751713988987e9331980363e24189ce.dir
      size: 0
      nfiles: 0
    - path: src/artifacts/recent_model/model_config.config
      hash: md5
      md5: 0369218594a77611af250d6e39b767a7
      size: 357
    - path: src/artifacts/recent_model/rnn
      hash: md5
      md5: 3cd07645bfe0f51fe50c13bdafbe7529.dir
      size: 8267856
      nfiles: 4
  data:
    cmd: python src/data/user_input.py --config_path params.yaml
    deps:
    - path: src/data/user_input.py
      hash: md5
      md5: 98dedc472791fb654916b87508f86054
      size: 1129
    params:
      params.yaml:
        dataset:
          path: data/Twitter/preprocessed/train.csv
          name: Twitter
          nrows: 30000
        preprocess:
          method: bow
          padding:
            padding: post
            truncating: post
            maxlen: 75
    outs:
    - path: src/artifacts/data.h5
      hash: md5
      md5: ed554551be8f4ccf7e752be710c48313
      size: 9962048
    - path: src/artifacts/tokenizer.json
      hash: md5
      md5: f01d9098bf515ed97a261e4f47446fb1
      size: 1539678
  featurize:
    cmd: python src/data/user_input.py
    deps:
    - path: src/data/user_input.py
      hash: md5
      md5: a7b095f869dfd7190d38ff410929fa31
      size: 817
    params:
      params.yaml:
        dataset:
          raw_path: data/Twitter/raw/train.csv
          preprocessed_path: src/artifacts/data/preprocessed/train.csv
          name: Twitter
          nrows_preprocess: None
          text_column_index: 3
          label_column_index: 2
        featurize:
          method: padding
          padding:
            padding: post
            truncating: post
            maxlen: 75
    outs:
    - path: src/artifacts/data.h5
      hash: md5
      md5: 441956a6157512b773d8f5b34f7e20e6
      size: 23073060
    - path: src/artifacts/tokenizer.json
      hash: md5
      md5: 51cbb861a5a77c424d1a9bf97207aa57
      size: 2526060
  stage:
    cmd: python src/registry/stage.py
    deps:
    - path: src/artifacts/recent_model/
      hash: md5
      md5: 9ba9de05b5ee3a57bdab1f3a1af5bacf.dir
      size: 8268212
      nfiles: 5
    - path: src/registry/stage.py
      hash: md5
      md5: 0efa99219ae5e20abfad6c9e580f42e9
      size: 4535
  promote:
    cmd: python src/registry/promote.py
    deps:
    - path: src/artifacts/recent_model/
      hash: md5
      md5: 5aea9c5942a708789b27f4d929246a7d.dir
      size: 8268213
      nfiles: 5
    - path: src/registry/stage.py
      hash: md5
      md5: 0efa99219ae5e20abfad6c9e580f42e9
      size: 4535
